#!/bin/bash

function usage() {
    echo -n \
"Usage: $(basename "$0")
Fixup the autogenerated symlink from forklift to be a relative path
"
}


if [ "${BASH_SOURCE[0]}" = "${0}" ]
then
    if [ "${1:-}" = "--help" ] || [ "$1" = "" ]
    then
        usage
    else
        MIGRATION_LINKS=app-backend/migrations/src/main/scala/migrations
        MIGRATIONS=../../../../src_migrations/main/scala
        if [ -e "${MIGRATION_LINKS}/${1}.scala" ]
        then
            rm "${MIGRATION_LINKS}/${1}.scala"
        fi
        ln -s "${MIGRATIONS}/${1}.scala" "${MIGRATION_LINKS}/${1}.scala"
    fi
    exit
fi
