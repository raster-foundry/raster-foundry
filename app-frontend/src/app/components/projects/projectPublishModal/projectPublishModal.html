<div class="modal-scrollable-body modal-sidebar-header">
  <div class="modal-header">
    <button type="button" class="close" aria-label="Close" ng-click="$ctrl.dismiss()">
      <span aria-hidden="true">&times;</span>
    </button>
    <h4 class="modal-title">
      Publishing
    </h4>
    <h6 class="modal-title" ng-attr-title="{{$ctrl.resolve.templateTitle ? $ctrl.resolve.templateTitle : $ctrl.resolve.project.name}}">{{$ctrl.resolve.templateTitle ? $ctrl.resolve.templateTitle : $ctrl.resolve.project.name}}</h6>
  </div>
  <div class="modal-body">
    <div class="content" ng-show="$ctrl.shareUrl">
      <div class="form-group">
        <label>Map Visibility</label>
        <div class="form-group">
          <div class="btn-group inline">
            <button class="btn btn-primary"
                    ng-repeat="policy in $ctrl.sharePolicies"
                    ng-if="policy.enabled"
                    ng-click="$ctrl.onPolicyChange(policy)"
                    ng-class="{'active': policy.active}"
                    ng-disabled="!policy.enabled">
              {{policy.label}}
            </button>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label>Published Page</label>
        <div class="form-group all-in-one">
          <label for="tile-link" class="sr-only">URL</label>
          <input id="tile-link" type="text" class="form-control"
                 value="{{$ctrl.shareUrl}}" readonly>
          <button class="btn btn-link btn-copy-modal-first"
                  clipboard text="$ctrl.shareUrl"
                  ng-click="$ctrl.onCopyClick($event, $ctrl.shareUrl, 'page')">
                  <span ng-show="$ctrl.copyType !== 'page'">Copy</span>
                  <span class="icon-check copy-confirmation" ng-show="$ctrl.copyType === 'page'"></span>
          </button>
          <button class="btn btn-primary"
                  ng-click="$ctrl.openProjectShare()">
            Open
          </button>
        </div>
      </div>
      <div class="form-group">
        <label for="tile-link">ZXY Tile Layer URL</label>
        <div class="form-group all-in-one">
          <input id="tile-link" type="text" class="form-control"
                  value="{{$ctrl.tileLayerUrls.standard}}" readonly>
          <button class="btn btn-link btn-copy-modal"
                  clipboard text="$ctrl.tileLayerUrls.standard"
                  ng-click="$ctrl.onCopyClick($event, $ctrl.tileLayerUrls.standard, 'zxy')">
                  <span ng-show="$ctrl.copyType !== 'zxy'">Copy</span>
                  <span class="icon-check copy-confirmation" ng-show="$ctrl.copyType === 'zxy'"></span>
          </button>
        </div>
        <label for="tile-link">ArcGIS Tile Layer URL</label>
        <div class="form-group all-in-one">
          <input id="tile-link" type="text" class="form-control"
                  value="{{$ctrl.tileLayerUrls.arcGIS}}" readonly>
          <button class="btn btn-link btn-copy-modal"
                  clipboard text="$ctrl.tileLayerUrls.arcGIS"
                  ng-click="$ctrl.onCopyClick($event, $ctrl.tileLayerUrls.arcGIS, 'arcGIS')">
                  <span ng-show="$ctrl.copyType !== 'arcGIS'">Copy</span>
                  <span class="icon-check copy-confirmation" ng-show="$ctrl.copyType === 'arcGIS'"></span>
          </button>
        </div>
      </div>
      <div ng-if="$ctrl.activePolicy.enum === 'PRIVATE'" class="form-group">
        <label>Map Token</label>
        <div class="form-group all-in-one">
          <input id="tile-link" type="text" class="form-control"
                 value="{{$ctrl.mapToken.id}}" readonly>
          <button class="btn btn-link btn-copy-modal"
                  clipboard text="$ctrl.mapToken.id"
                  ng-click="$ctrl.onCopyClick($event, $ctrl.mapToken.id, 'token')">
                  <span ng-show="$ctrl.copyType !== 'token'">Copy</span>
                  <span class="icon-check copy-confirmation" ng-show="$ctrl.copyType === 'token'"></span>
          </button>
        </div>
      </div>
    </div>
    <div class="content" ng-show="$ctrl.resolve.templateTitle">
      <h4>Sharing</h4>
      <div class="form-group">
        <label for="tile-link">ZXY Tile Layer URL</label>
        <div class="form-group all-in-one">
          <input id="tile-link" type="text" class="form-control"
                  value="{{$ctrl.tileLayerUrls.standard}}" readonly>
          <button class="btn btn-link btn-copy-modal"
                  clipboard text="$ctrl.tileLayerUrls.standard"
                  ng-click="$ctrl.onCopyClick($event, $ctrl.tileLayerUrls.standard, 'zxy')">
                  <span ng-show="$ctrl.copyType !== 'zxy'">Copy</span>
                  <span class="icon-check copy-confirmation" ng-show="$ctrl.copyType === 'zxy'"></span>
          </button>
        </div>
        <label for="tile-link">ArcGIS Tile Layer URL</label>
        <div class="form-group all-in-one">
          <input id="tile-link" type="text" class="form-control"
                  value="{{$ctrl.tileLayerUrls.arcGIS}}" readonly>
          <button class="btn btn-link btn-copy-modal"
                  clipboard text="$ctrl.tileLayerUrls.arcGIS"
                  ng-click="$ctrl.onCopyClick($event, $ctrl.tileLayerUrls.arcGIS, 'arcGIS')">
                  <span ng-show="$ctrl.copyType !== 'arcGIS'">Copy</span>
                  <span class="icon-check copy-confirmation" ng-show="$ctrl.copyType === 'arcGIS'"></span>
          </button>
        </div>
        <label>Token</label>
        <div class="form-group all-in-one">
          <input id="tile-link" type="text" class="form-control"
                 value="{{$ctrl.analysisToken}}" readonly>
          <button class="btn btn-link btn-copy-modal"
                  clipboard text="$ctrl.analysisToken"
                  ng-click="$ctrl.onCopyClick($event, $ctrl.analysisToken, 'token')">
                  <span ng-show="$ctrl.copyType !== 'token'">Copy</span>
                  <span class="icon-check copy-confirmation" ng-show="$ctrl.copyType === 'token'"></span>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn"
            ng-click="$ctrl.dismiss()">
      Done
    </button>
  </div>
</div>
