<div class="modal-header">
    <button type="button" class="close" aria-label="Close modal" ng-click="$ctrl.dismiss()">
        <i aria-hidden="true" class="icon-cross"> <span class="sr-only">Close modal</span> </i>
    </button>
    <h4 class="modal-title">{{ $ctrl.resolve.content.title }}</h4>
    <p>{{ $ctrl.resolve.content.title }} for node <strong>{{$ctrl.resolve.content.nodeName}}</strong></p>
</div>
<div class="modal-body">
    <div class="modal-action-bar" ng-if="!$ctrl.resolve.isLayerSelect">
        <label for="">Search projects</label>
        <rf-search
            on-search="$ctrl.fetchPage(1, value)"
            value="$ctrl.search"
            placeholder="Search for projects"
            auto-focus="true"
        ></rf-search>
        <select
            class="form-control inline"
            ng-model="$ctrl.currentOwnershipFilter"
            ng-change="$ctrl.handleOwnershipFilterChange()"
        >
            <option value="owned">Owned by me</option>
            <option value="shared">Shared with me</option>
        </select>
    </div>
    <div class="modal-inner-container fixed-height">
        <div class="row">
            <div class="column-4 flex-display" ng-repeat="item in $ctrl.results">
                <rf-project-item
                    item="item"
                    slim="true"
                    is-layer="$ctrl.resolve.isLayerSelect"
                    parent-project="$ctrl.resolve.project"
                    class="panel panel-off-white project-item"
                    ng-click="$ctrl.setSelected(item)"
                >
                </rf-project-item>
            </div>
        </div>
        <div class="list-group">
            <span class="list-placeholder" ng-show="$ctrl.currentQuery">
                <i class="icon-load animate-spin" ng-class="{'stop': !$ctrl.currentQuery}"></i>
            </span>
            <span
                class="list-placeholder"
                ng-if="!$ctrl.currentQuery && !$ctrl.results.length && !$ctrl.search"
            >
                You have not created any {{$ctrl.resolve.isLayerSelect ? 'Project layers':
                'Projects'}}.
            </span>
            <span
                class="list-placeholder"
                ng-if="!$ctrl.currentQuery && !$ctrl.results.length && $ctrl.search"
            >
                Unable to find any {{$ctrl.resolve.isLayerSelect ? 'project layers': 'projects'}}
                matching: <strong>{{ $ctrl.search }}</strong>
            </span>
        </div>
    </div>
    <div class="modal-inner-container compact">
        <div class="row no-margin align-justify columns-center">
            <rf-pagination-count
                start-index="$ctrl.pagination.startingItem"
                end-index="$ctrl.pagination.endingItem"
                total="$ctrl.pagination.count"
                item-name="{{$ctrl.resolve.isLayerSelect ? 'project layers': 'projects'}}"
                ng-if="!$ctrl.currentQuery && $ctrl.pagination.count"
            >
                <span ng-if="$ctrl.search"
                    >while searching for <strong>{{ $ctrl.search }}</strong></span
                >
            </rf-pagination-count>
            <rf-pagination-controls
                pagination="$ctrl.pagination"
                is-loading="$ctrl.currentQuery"
                on-change="$ctrl.fetchPage(value)"
                ng-show="!$ctrl.currentQuery && !ctrl.fetchError"
            ></rf-pagination-controls>
        </div>
    </div>
</div>
<div class="modal-footer">
    <div class="footer-section left">
        <button type="button" class="btn" ng-click="$ctrl.dismiss()">Close</button>
    </div>
    <div class="footer-section right"></div>
</div>
